!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).autocomplete=t()}(this,(function(){"use strict";return function(e){var t,n,o,i=document,r=null!==(t=e.shadowRoot)&&void 0!==t?t:null,f=e.container||i.createElement("div"),l=f.style,u=navigator.userAgent,a=-1!==u.indexOf("Firefox")&&-1!==u.indexOf("Mobile"),s=e.debounceWaitMs||0,d=e.preventSubmit||!1,c=e.disableAutoSelect||!1,p=a?"input":"keyup",v=[],m="",g=2,h=e.showOnFocus,E=0;if(void 0!==e.minLength&&(g=e.minLength),!e.input)throw new Error("input undefined");var w=e.input;function L(){o&&window.clearTimeout(o)}function b(){return!!f.parentNode}function y(){var e;E++,v=[],m="",n=void 0,(e=f.parentNode)&&e.removeChild(f)}function x(){for(;f.firstChild;)f.removeChild(f.firstChild);var t=function(e,t){var n=i.createElement("div");return n.textContent=e.label||"",n};e.render&&(t=e.render);var o=function(e,t){var n=i.createElement("div");return n.textContent=e,n};e.renderGroup&&(o=e.renderGroup);var u=i.createDocumentFragment(),a="#9?$";if(v.forEach((function(i){if(i.group&&i.group!==a){a=i.group;var r=o(i.group,m);r&&(r.className+=" group",u.appendChild(r))}var f=t(i,m);f&&(f.addEventListener("click",(function(t){e.onSelect(i,w),y(),t.preventDefault(),t.stopPropagation()})),i===n&&(f.className+=" selected"),u.appendChild(f))})),f.appendChild(u),v.length<1){if(!e.emptyMsg)return void y();var s=i.createElement("div");s.className="empty",s.textContent=e.emptyMsg,f.appendChild(s)}f.parentNode||(null!=r?r:i.body).appendChild(f),function(){if(b()){l.height="auto",l.width=w.offsetWidth+"px";var t,n=0;o(),o(),e.customize&&t&&e.customize(w,t,f,n)}function o(){var e=i.documentElement,o=e.clientTop||i.body.clientTop||0,r=e.clientLeft||i.body.clientLeft||0,f=window.pageYOffset||e.scrollTop,u=window.pageXOffset||e.scrollLeft,a=(t=w.getBoundingClientRect()).top+w.offsetHeight+f-o,s=t.left+u-r;l.top=a+"px",l.left=s+"px",(n=window.innerHeight-(t.top+w.offsetHeight))<0&&(n=0),l.top=a+"px",l.bottom="",l.left=s+"px",l.maxHeight=n+"px"}}(),function(){var e=f.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<f.scrollTop)f.scrollTop=t.offsetTop;else{var o=t.offsetTop+t.offsetHeight,i=f.scrollTop+f.offsetHeight;o>i&&(f.scrollTop+=o-i)}}}()}function C(){b()&&x()}function T(){C()}function N(e){e.target!==f?C():e.preventDefault()}function k(e){for(var t=e.which||e.keyCode||0,n=0,o=[38,13,27,39,37,16,17,18,20,91,9];n<o.length;n++){if(t===o[n])return}t>=112&&t<=123||40===t&&b()||O(0)}function D(t){var o=t.which||t.keyCode||0;if(38===o||40===o||27===o){var i=b();if(27===o)y();else{if(!i||v.length<1)return;38===o?function(){if(v.length<1)n=void 0;else if(n===v[0])n=v[v.length-1];else for(var e=v.length-1;e>0;e--)if(n===v[e]||1===e){n=v[e-1];break}}():function(){if(v.length<1&&(n=void 0),n&&n!==v[v.length-1]){for(var e=0;e<v.length-1;e++)if(n===v[e]){n=v[e+1];break}}else n=v[0]}(),x()}return t.preventDefault(),void(i&&t.stopPropagation())}13===o&&(n&&(e.onSelect(n,w),y()),d&&t.preventDefault())}function H(){h&&O(1)}function O(t){var i=++E,r=w.value;r.length>=g||1===t?(L(),o=window.setTimeout((function(){e.fetch(r,(function(e){E===i&&e&&(m=r,n=(v=e).length<1||c?void 0:v[0],x())}),t)}),0===t?s:0)):y()}function S(){setTimeout((function(){i.activeElement!==w&&y()}),200)}return f.className="autocomplete "+(e.className||""),l.position="absolute",f.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),f.addEventListener("focus",(function(){return w.focus()})),w.addEventListener("keydown",D),w.addEventListener(p,k),w.addEventListener("blur",S),w.addEventListener("focus",H),window.addEventListener("resize",T),i.addEventListener("scroll",N,!0),{destroy:function(){w.removeEventListener("focus",H),w.removeEventListener("keydown",D),w.removeEventListener(p,k),w.removeEventListener("blur",S),window.removeEventListener("resize",T),i.removeEventListener("scroll",N,!0),L(),y()}}}}));
//# sourceMappingURL=autocomplete.min.js.map
